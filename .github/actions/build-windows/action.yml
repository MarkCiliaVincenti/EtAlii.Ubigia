name: "Build on Windows"
description: "Build the solutions on a Windows container"
inputs:
  configuration:
    description: 'The build configuration to use'
    required: true
  solution:
    description: 'The solution that should be published'
    required: true
runs:
  using: composite
  steps:

    # Setup .NET
    - name: 'Setup .NET'
      uses: actions/setup-dotnet@v1
      with:
        dotnet-version: 5.0.302

    # Versioning.
    - name: 'Versioning'
      uses: dotnet/nbgv@master
      id: nbgv

    # Restore.
    - name: 'Restore dependencies'
      shell: pwsh
      run: >
        dotnet restore
        ${{ inputs.solution }}

    # Build.
    - name: 'Build'
      shell: pwsh
      run: >
        dotnet build
        ${{ inputs.solution }}
        --no-restore
        --configuration ${{ inputs.configuration }}
        /p:UbigiaIsRunningOnBuildAgent=true

#    - uses: actions/upload-artifact@v2
#      with:
#        name: windows-build
#        retention-days: 100
#        path: .\**\bin\
